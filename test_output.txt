============================= test session starts =============================
platform win32 -- Python 3.11.3, pytest-8.4.2, pluggy-1.6.0 -- C:\Users\yasma\Desktop\retail-recommender-system\venv\Scripts\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\yasma\Desktop\retail-recommender-system
configfile: pytest.ini
plugins: anyio-4.11.0, asyncio-1.2.0, cov-7.0.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 1 item

tests/integration/test_products_router.py::TestProductDetailEndpoint::test_get_product_not_found 
------------------------------- live log setup --------------------------------
INFO     src.api.core.redis_config_optimized:redis_config_optimized.py:26 \u2705 Redis module imported successfully (optimized config)\nDEBUG    google.cloud.storage._opentelemetry_tracing:_opentelemetry_tracing.py:42 This service is instrumented using OpenTelemetry. OpenTelemetry or one of its components could not be imported; please add compatible versions of opentelemetry-api and opentelemetry-instrumentation packages in order to get Storage Tracing data.
WARNING  root:retail_api.py:23 CatalogManager no disponible. Las funciones de gesti≤n de ramas pueden no funcionar correctamente.
INFO     src.api.factories.factories:factories.py:37 \u2705 Enterprise integration: ServiceFactory loaded successfully\nINFO     src.api.factories:__init__.py:42 \u2705 Business domain factories loaded successfully\nINFO     src.api.factories:__init__.py:278 \u2705 Factory architecture validation successful\nINFO     src.api.core.redis_config_fix:redis_config_fix.py:19 \u2705 Redis module imported successfully in redis_config_fix\nINFO     tests.conftest:conftest.py:373 \u2705 HTTP requests.get patched - all HTTP calls will return 404\nINFO     src.api.main_unified_redis:main_unified_redis.py:61 \u2705 ObservabilityManager loaded - Enterprise observability enabled\nINFO     src.api.core.claude_config:claude_config.py:148 \u2705 Resolved CLAUDE_MODEL_TIER 'SONNET' to claude-sonnet-4-20250514\nINFO     src.api.core.claude_config:claude_config.py:138 \U0001f527 Claude configuration initialized: model=claude-sonnet-4-20250514, region=ClaudeRegion.GLOBAL\nDEBUG    src.api.core.observability_manager:observability_manager.py:60 \U0001f3af MetricsCollector initialized\nINFO     src.api.core.observability_manager:observability_manager.py:225 \U0001f3af ObservabilityManager initialized with MetricsCollector\nINFO     src.api.main_unified_redis:main_unified_redis.py:65 \u2705 MetricsCollector integrated - Enterprise monitoring ready\nINFO     src.api.main_unified_redis:main_unified_redis.py:75 \u2705 Environment variables loaded\n MCP services disponibles
INFO     src.api.core.mcp_router_conservative_enhancement:mcp_router_conservative_enhancement.py:227 \U0001f512 Applying MODERATE performance enhancement - FUNCTIONALITY FIRST\nINFO     src.api.core.mcp_router_conservative_enhancement:mcp_router_conservative_enhancement.py:33 \U0001f512 FunctionalityFirstStateManager initialized - FUNCTIONALITY PRIORITIZED\nINFO     src.api.core.mcp_router_conservative_enhancement:mcp_router_conservative_enhancement.py:340 \u2705 Moderate performance enhancement applied successfully\nINFO     src.api.core.mcp_router_conservative_enhancement:mcp_router_conservative_enhancement.py:341    Target: 150-300ms response time
INFO     src.api.core.mcp_router_conservative_enhancement:mcp_router_conservative_enhancement.py:342    Priority: 100% functionality preservation
INFO     src.api.core.mcp_router_conservative_enhancement:mcp_router_conservative_enhancement.py:343    Approach: Conservative optimization with full state management
INFO     src.api.main_unified_redis:main_unified_redis.py:102 \u2705 Enterprise performance enhancements applied to MCP router\nINFO     src.api.main_unified_redis:main_unified_redis.py:115 \u2705 MCP Personalization Engine loaded - Enterprise personalization enabled\nINFO     src.api.main_unified_redis:main_unified_redis.py:1136 \u2705 Enterprise routers registered successfully\nDEBUG    asyncio:proactor_events.py:633 Using proactor: IocpProactor
INFO     src.api.main_unified_redis:main_unified_redis.py:144 \U0001f680 Starting Enterprise Retail Recommender System v2.1.0 - DEPENDENCY INJECTION CORRECTED\nINFO     src.api.main_unified_redis:main_unified_redis.py:153 \u2705 Global settings initialized\nINFO     src.api.main_unified_redis:main_unified_redis.py:157 \u2705 StartupManager initialized\nINFO     src.api.factories:__init__.py:278 \u2705 Factory architecture validation successful\nINFO     src.api.main_unified_redis:main_unified_redis.py:161 \u2705 Factory architecture validation: True\nINFO     src.api.main_unified_redis:main_unified_redis.py:167 \U0001f527 Initializing enterprise infrastructure services...\nINFO     src.api.main_unified_redis:main_unified_redis.py:173 \U0001f504 Attempting Redis service initialization with eager connection...\nINFO     src.api.factories.service_factory:service_factory.py:163 \U0001f504 Initializing RedisService singleton (THREAD-SAFE)\nINFO     src.api.core.redis_config_optimized:redis_config_optimized.py:53 Redis cache desactivado por configuraci≤n
INFO     src.api.factories.service_factory:service_factory.py:169 \U0001f527 Using optimized Redis timeout: 1.5s\nINFO     src.api.core.redis_service:redis_service.py:60 \u2705 get_instance(): Getting RedisService instance: None\nINFO     src.api.core.redis_service:redis_service.py:77 \U0001f504 Initializing RedisService with optimized client...\nINFO     src.api.core.redis_config_optimized:redis_config_optimized.py:53 Redis cache desactivado por configuraci≤n
ERROR    src.api.core.redis_service:redis_service.py:93 \u274c Redis optimized connection failed: Redis cache est\xe1 desactivado\nINFO     src.api.core.redis_service:redis_service.py:94 \U0001f504 RedisService degrading gracefully - fallback mode active\nINFO     src.api.core.redis_service:redis_service.py:66 \u2705 get_instance(): RedisService instance retrieved: <src.api.core.redis_service.RedisService object at 0x000001E300446F90>\nINFO     src.api.core.redis_service:redis_service.py:351 \u2705 get_redis_service(): RedisService instance retrieved: <src.api.core.redis_service.RedisService object at 0x000001E300446F90>\nINFO     src.api.factories.service_factory:service_factory.py:184 \u2705 Redis health check OK: disconnected\nINFO     src.api.factories.service_factory:service_factory.py:193 \u2705 RedisService singleton initialized successfully (THREAD-SAFE)\nINFO     src.api.main_unified_redis:main_unified_redis.py:180 \U0001f504 Validating Redis connection before proceeding...\nINFO     src.api.main_unified_redis:main_unified_redis.py:188 \U0001f4ca Redis health check result: {'service': 'redis', 'timestamp': '2025-11-08T18:03:42.630017', 'connected': False, 'client_available': False, 'connection_attempts': 0, 'stats': {'operations_total': 0, 'operations_successful': 0, 'operations_failed': 0, 'cache_hits': 0, 'cache_misses': 0, 'connection_errors': 0}, 'status': 'disconnected', 'last_test': 'no_client'}\nERROR    src.api.main_unified_redis:main_unified_redis.py:211 \u274c Redis health check failed - Status: disconnected, Connected: False\nWARNING  src.api.main_unified_redis:main_unified_redis.py:223 \u26a0\ufe0f Redis client not available - legacy compatibility will use fallback\nINFO     src.api.main_unified_redis:main_unified_redis.py:237 \U0001f4ca REDIS INITIALIZATION SUMMARY:\nINFO     src.api.main_unified_redis:main_unified_redis.py:238    - Redis Service Created: True
INFO     src.api.main_unified_redis:main_unified_redis.py:239    - Redis Validated Connected: False
INFO     src.api.main_unified_redis:main_unified_redis.py:240    - Redis Client Available: False
WARNING  src.api.main_unified_redis:main_unified_redis.py:244 \u26a0\ufe0f IMPORTANT: Redis not available - ProductCache will run in fallback mode\nINFO     src.api.main_unified_redis:main_unified_redis.py:249 \U0001f504 Attempting Shopify initialization...\nINFO     src.api.main_unified_redis:main_unified_redis.py:252 \u2705 Shopify client initialized\nINFO     src.api.main_unified_redis:main_unified_redis.py:262 \U0001f916 Creating recommendation components...\nINFO     src.api.main_unified_redis:main_unified_redis.py:268 \u2705 TF-IDF and Retail recommenders created\nINFO     src.api.main_unified_redis:main_unified_redis.py:285 \U0001f4cb Registering components in StartupManager...\nINFO     src.api.main_unified_redis:main_unified_redis.py:294 \u2705 TF-IDF recommender registered in StartupManager\nINFO     src.api.main_unified_redis:main_unified_redis.py:299 \u23f3 INICIANDO CARGA DE COMPONENTES EN SEGUNDO PLANO...\nINFO     src.api.main_unified_redis:main_unified_redis.py:304 \u2705 CARGA DE COMPONENTES COMPLETADA\nINFO     src.api.main_unified_redis:main_unified_redis.py:308 \u2705 TF-IDF Status after training: loaded=True\nINFO     src.api.main_unified_redis:main_unified_redis.py:310 \u2705 TF-IDF trained with 10 products\nINFO     src.api.main_unified_redis:main_unified_redis.py:323 \U0001f5c4\ufe0f Creating ProductCache via ServiceFactory with local_catalog injection...\nWARNING  src.api.main_unified_redis:main_unified_redis.py:369 \u26a0\ufe0f ProductCache creation skipped - Redis not available\nINFO     src.api.main_unified_redis:main_unified_redis.py:379 \U0001f504 Creating Hybrid Recommender with optimized ProductCache...\nINFO     src.api.main_unified_redis:main_unified_redis.py:392 \u2705 Hybrid recommender created with fallback mode (no ProductCache)\nINFO     src.api.main_unified_redis:main_unified_redis.py:407 \U0001f504 Attempting InventoryService initialization...\nINFO     src.api.inventory.inventory_service:inventory_service.py:118 \U0001f3ea InventoryService v2.0 initialized - Redis: True\nINFO     src.api.inventory.inventory_service:inventory_service.py:128 \u2705 Shopify client initialized\nINFO     src.api.factories.service_factory:service_factory.py:349 \u2705 InventoryService created with fixed RedisService singleton\nINFO     src.api.factories.service_factory:service_factory.py:363 \u2705 InventoryService singleton initialized\nINFO     src.api.main_unified_redis:main_unified_redis.py:412 \u2705 Enterprise InventoryService initialized\nINFO     src.api.main_unified_redis:main_unified_redis.py:420 \U0001f916 Initializing MCP Recommender for dependency injection...\nINFO     src.api.integrations.ai.ai_conversation_manager:ai_conversation_manager.py:66 \U0001f916 ConversationAIManager initialized with centralized Claude config: claude-sonnet-4-20250514\nINFO     src.api.integrations.ai.optimized_conversation_manager:optimized_conversation_manager.py:55 Circuit breaker initialized: threshold=5, timeout=60s
INFO     src.api.integrations.ai.optimized_conversation_manager:optimized_conversation_manager.py:159 Claude circuit breaker enabled
INFO     src.api.integrations.ai.optimized_conversation_manager:optimized_conversation_manager.py:165 Local caching enabled
INFO     src.api.integrations.ai.optimized_conversation_manager:optimized_conversation_manager.py:231 HTTP client optimized with connection pooling
INFO     src.api.integrations.ai.optimized_conversation_manager:optimized_conversation_manager.py:179 OptimizedConversationAIManager initialized successfully
INFO     src.api.factories.service_factory:service_factory.py:881 \u2705 OptimizedConversationAIManager initialized successfully\nINFO     src.api.mcp.engines.mcp_personalization_engine:mcp_personalization_engine.py:124 \u2705 MCPPersonalizationEngine: Using Redis service\nINFO     src.api.mcp.engines.mcp_personalization_engine:mcp_personalization_engine.py:163 \U0001f3af MCPPersonalizationEngine initialized with centralized Claude config: claude-sonnet-4-20250514\nINFO     src.api.factories.service_factory:service_factory.py:913 \u2705 MCPPersonalizationEngine singleton initialized successfully\nINFO     src.api.main_unified_redis:main_unified_redis.py:425 \u2705 MCP Recommender initialized and registered in app.state\nINFO     src.api.main_unified_redis:main_unified_redis.py:443 \u2139\ufe0f Skipping comprehensive health check due to Redis issues\nINFO     src.api.main_unified_redis:main_unified_redis.py:451 \U0001f9ea Running validation tests...\nINFO     src.api.main_unified_redis:main_unified_redis.py:460 \u2705 TF-IDF validation: Generated 3 test recommendations\nINFO     src.api.main_unified_redis:main_unified_redis.py:483 \U0001f4cb CORRECTED STARTUP SUMMARY:\nINFO     src.api.main_unified_redis:main_unified_redis.py:484    \u2705 Settings: Loaded\nINFO     src.api.main_unified_redis:main_unified_redis.py:485    \u2705 StartupManager: Active\nINFO     src.api.main_unified_redis:main_unified_redis.py:486    \u2705 TF-IDF Recommender: Ready\nINFO     src.api.main_unified_redis:main_unified_redis.py:487    \u2705 Retail Recommender: Ready\nINFO     src.api.main_unified_redis:main_unified_redis.py:488    \u2705 Hybrid Recommender: Ready\nINFO     src.api.main_unified_redis:main_unified_redis.py:489    \u2705 Redis: Fallback\nINFO     src.api.main_unified_redis:main_unified_redis.py:490    \u2705 ProductCache: Fallback\nINFO     src.api.main_unified_redis:main_unified_redis.py:495    \U0001f4ca Products in catalog: 10\nINFO     src.api.main_unified_redis:main_unified_redis.py:501 \U0001f389 CORRECTED Enterprise startup completed successfully\nINFO     src.api.main_unified_redis:main_unified_redis.py:502 \U0001f527 DEPENDENCY INJECTION FIX (OPCI\xd3N B) APPLIED - ProductCache singleton via ServiceFactory\nINFO     src.api.main_unified_redis:main_unified_redis.py:503 \u2705 T1 CRITICAL FIX: local_catalog injected, DiversityAwareCache should use DYNAMIC categories\n-------------------------------- live log call --------------------------------
INFO     src.api.inventory.inventory_service:inventory_service.py:118 \U0001f3ea InventoryService v2.0 initialized - Redis: False\nINFO     src.api.routers.products_router:products_router.py:670 \U0001f50d Getting individual product nonexistent_product_999999 for market US\nWARNING  src.api.routers.products_router:products_router.py:687 \u26a0\ufe0f ProductCache unavailable for nonexistent_product_999999, operating without cache\nINFO     src.api.routers.products_router:products_router.py:723 \U0001f3af Using direct API call for product nonexistent_product_999999\nINFO     src.api.routers.products_router:products_router.py:1174 \U0001f3af Direct API call for product nonexistent_product_999999\nDEBUG    src.api.routers.products_router:products_router.py:1179 Using shopify_client.get_product()
DEBUG    src.api.routers.products_router:products_router.py:1191 Using shopify_client.get_product_by_id()
DEBUG    src.api.routers.products_router:products_router.py:1208 Trying direct URL: https://test-shop.myshopify.com/admin/api/2024-01/products/nonexistent_product_999999.json
DEBUG    src.api.routers.products_router:products_router.py:1247 Trying direct requests call to: https://test-shop.myshopify.com/admin/api/2024-01/products/nonexistent_product_999999.json
INFO     src.api.routers.products_router:products_router.py:1259 \u26a0\ufe0f Product nonexistent_product_999999 not found (404): 1.0ms\nWARNING  src.api.routers.products_router:products_router.py:728 \u26a0\ufe0f Direct API failed, trying optimized search for nonexistent_product_999999\nINFO     src.api.routers.products_router:products_router.py:1317 \U0001f50d Fetching individual product from Shopify: nonexistent_product_999999\nINFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 20 products for nonexistent_product_999999\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product nonexistent_product_999999 not found in first 20 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 50 products for nonexistent_product_999999\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product nonexistent_product_999999 not found in first 50 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 100 products for nonexistent_product_999999\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product nonexistent_product_999999 not found in first 100 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 200 products for nonexistent_product_999999\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product nonexistent_product_999999 not found in first 200 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 500 products for nonexistent_product_999999\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product nonexistent_product_999999 not found in first 500 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 1000 products for nonexistent_product_999999\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product nonexistent_product_999999 not found in first 1000 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 2000 products for nonexistent_product_999999\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product nonexistent_product_999999 not found in first 2000 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 3000 products for nonexistent_product_999999\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product nonexistent_product_999999 not found in first 3000 products
WARNING  src.api.routers.products_router:products_router.py:1390 \u26a0\ufe0f Product nonexistent_product_999999 not found in progressive search\nERROR    src.api.routers.products_router:products_router.py:1442 \u274c Product nonexistent_product_999999 not found in Shopify after 1.0ms\nWARNING  src.api.routers.products_router:products_router.py:747 \u274c Product nonexistent_product_999999 not found in any source\nINFO     httpx:_client.py:1025 HTTP Request: GET http://testserver/v1/products/nonexistent_product_999999 "HTTP/1.1 404 Not Found"
 Product 'nonexistent_product_999999' correctly returns 404
INFO     src.api.inventory.inventory_service:inventory_service.py:118 \U0001f3ea InventoryService v2.0 initialized - Redis: False\nINFO     src.api.routers.products_router:products_router.py:670 \U0001f50d Getting individual product does_not_exist_123 for market US\nWARNING  src.api.routers.products_router:products_router.py:687 \u26a0\ufe0f ProductCache unavailable for does_not_exist_123, operating without cache\nINFO     src.api.routers.products_router:products_router.py:723 \U0001f3af Using direct API call for product does_not_exist_123\nINFO     src.api.routers.products_router:products_router.py:1174 \U0001f3af Direct API call for product does_not_exist_123\nDEBUG    src.api.routers.products_router:products_router.py:1179 Using shopify_client.get_product()
DEBUG    src.api.routers.products_router:products_router.py:1191 Using shopify_client.get_product_by_id()
DEBUG    src.api.routers.products_router:products_router.py:1208 Trying direct URL: https://test-shop.myshopify.com/admin/api/2024-01/products/does_not_exist_123.json
DEBUG    src.api.routers.products_router:products_router.py:1247 Trying direct requests call to: https://test-shop.myshopify.com/admin/api/2024-01/products/does_not_exist_123.json
INFO     src.api.routers.products_router:products_router.py:1259 \u26a0\ufe0f Product does_not_exist_123 not found (404): 0.0ms\nWARNING  src.api.routers.products_router:products_router.py:728 \u26a0\ufe0f Direct API failed, trying optimized search for does_not_exist_123\nINFO     src.api.routers.products_router:products_router.py:1317 \U0001f50d Fetching individual product from Shopify: does_not_exist_123\nINFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 20 products for does_not_exist_123\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product does_not_exist_123 not found in first 20 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 50 products for does_not_exist_123\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product does_not_exist_123 not found in first 50 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 100 products for does_not_exist_123\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product does_not_exist_123 not found in first 100 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 200 products for does_not_exist_123\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product does_not_exist_123 not found in first 200 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 500 products for does_not_exist_123\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product does_not_exist_123 not found in first 500 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 1000 products for does_not_exist_123\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product does_not_exist_123 not found in first 1000 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 2000 products for does_not_exist_123\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product does_not_exist_123 not found in first 2000 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 3000 products for does_not_exist_123\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product does_not_exist_123 not found in first 3000 products
WARNING  src.api.routers.products_router:products_router.py:1390 \u26a0\ufe0f Product does_not_exist_123 not found in progressive search\nERROR    src.api.routers.products_router:products_router.py:1442 \u274c Product does_not_exist_123 not found in Shopify after 1.0ms\nWARNING  src.api.routers.products_router:products_router.py:747 \u274c Product does_not_exist_123 not found in any source\nINFO     httpx:_client.py:1025 HTTP Request: GET http://testserver/v1/products/does_not_exist_123 "HTTP/1.1 404 Not Found"
 Product 'does_not_exist_123' correctly returns 404
INFO     src.api.inventory.inventory_service:inventory_service.py:118 \U0001f3ea InventoryService v2.0 initialized - Redis: False\nINFO     src.api.routers.products_router:products_router.py:670 \U0001f50d Getting individual product prod_999999 for market US\nWARNING  src.api.routers.products_router:products_router.py:687 \u26a0\ufe0f ProductCache unavailable for prod_999999, operating without cache\nINFO     src.api.routers.products_router:products_router.py:723 \U0001f3af Using direct API call for product prod_999999\nINFO     src.api.routers.products_router:products_router.py:1174 \U0001f3af Direct API call for product prod_999999\nDEBUG    src.api.routers.products_router:products_router.py:1179 Using shopify_client.get_product()
DEBUG    src.api.routers.products_router:products_router.py:1191 Using shopify_client.get_product_by_id()
DEBUG    src.api.routers.products_router:products_router.py:1208 Trying direct URL: https://test-shop.myshopify.com/admin/api/2024-01/products/prod_999999.json
DEBUG    src.api.routers.products_router:products_router.py:1247 Trying direct requests call to: https://test-shop.myshopify.com/admin/api/2024-01/products/prod_999999.json
INFO     src.api.routers.products_router:products_router.py:1259 \u26a0\ufe0f Product prod_999999 not found (404): 0.0ms\nWARNING  src.api.routers.products_router:products_router.py:728 \u26a0\ufe0f Direct API failed, trying optimized search for prod_999999\nINFO     src.api.routers.products_router:products_router.py:1317 \U0001f50d Fetching individual product from Shopify: prod_999999\nINFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 20 products for prod_999999\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product prod_999999 not found in first 20 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 50 products for prod_999999\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product prod_999999 not found in first 50 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 100 products for prod_999999\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product prod_999999 not found in first 100 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 200 products for prod_999999\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product prod_999999 not found in first 200 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 500 products for prod_999999\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product prod_999999 not found in first 500 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 1000 products for prod_999999\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product prod_999999 not found in first 1000 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 2000 products for prod_999999\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product prod_999999 not found in first 2000 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 3000 products for prod_999999\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product prod_999999 not found in first 3000 products
WARNING  src.api.routers.products_router:products_router.py:1390 \u26a0\ufe0f Product prod_999999 not found in progressive search\nERROR    src.api.routers.products_router:products_router.py:1442 \u274c Product prod_999999 not found in Shopify after 1.0ms\nWARNING  src.api.routers.products_router:products_router.py:747 \u274c Product prod_999999 not found in any source\nINFO     httpx:_client.py:1025 HTTP Request: GET http://testserver/v1/products/prod_999999 "HTTP/1.1 404 Not Found"
 Product 'prod_999999' correctly returns 404
INFO     src.api.inventory.inventory_service:inventory_service.py:118 \U0001f3ea InventoryService v2.0 initialized - Redis: False\nINFO     src.api.routers.products_router:products_router.py:670 \U0001f50d Getting individual product invalid_id_xyz for market US\nWARNING  src.api.routers.products_router:products_router.py:687 \u26a0\ufe0f ProductCache unavailable for invalid_id_xyz, operating without cache\nINFO     src.api.routers.products_router:products_router.py:723 \U0001f3af Using direct API call for product invalid_id_xyz\nINFO     src.api.routers.products_router:products_router.py:1174 \U0001f3af Direct API call for product invalid_id_xyz\nDEBUG    src.api.routers.products_router:products_router.py:1179 Using shopify_client.get_product()
DEBUG    src.api.routers.products_router:products_router.py:1191 Using shopify_client.get_product_by_id()
DEBUG    src.api.routers.products_router:products_router.py:1208 Trying direct URL: https://test-shop.myshopify.com/admin/api/2024-01/products/invalid_id_xyz.json
DEBUG    src.api.routers.products_router:products_router.py:1247 Trying direct requests call to: https://test-shop.myshopify.com/admin/api/2024-01/products/invalid_id_xyz.json
INFO     src.api.routers.products_router:products_router.py:1259 \u26a0\ufe0f Product invalid_id_xyz not found (404): 0.0ms\nWARNING  src.api.routers.products_router:products_router.py:728 \u26a0\ufe0f Direct API failed, trying optimized search for invalid_id_xyz\nINFO     src.api.routers.products_router:products_router.py:1317 \U0001f50d Fetching individual product from Shopify: invalid_id_xyz\nINFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 20 products for invalid_id_xyz\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product invalid_id_xyz not found in first 20 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 50 products for invalid_id_xyz\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product invalid_id_xyz not found in first 50 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 100 products for invalid_id_xyz\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product invalid_id_xyz not found in first 100 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 200 products for invalid_id_xyz\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product invalid_id_xyz not found in first 200 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 500 products for invalid_id_xyz\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product invalid_id_xyz not found in first 500 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 1000 products for invalid_id_xyz\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product invalid_id_xyz not found in first 1000 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 2000 products for invalid_id_xyz\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product invalid_id_xyz not found in first 2000 products
INFO     src.api.routers.products_router:products_router.py:1370 \U0001f50d Searching in 3000 products for invalid_id_xyz\nDEBUG    src.api.routers.products_router:products_router.py:1380 Product invalid_id_xyz not found in first 3000 products
WARNING  src.api.routers.products_router:products_router.py:1390 \u26a0\ufe0f Product invalid_id_xyz not found in progressive search\nERROR    src.api.routers.products_router:products_router.py:1442 \u274c Product invalid_id_xyz not found in Shopify after 2.0ms\nWARNING  src.api.routers.products_router:products_router.py:747 \u274c Product invalid_id_xyz not found in any source\nINFO     httpx:_client.py:1025 HTTP Request: GET http://testserver/v1/products/invalid_id_xyz "HTTP/1.1 404 Not Found"
 Product 'invalid_id_xyz' correctly returns 404
PASSED
------------------------------ live log teardown ------------------------------
INFO     src.api.main_unified_redis:main_unified_redis.py:541 \U0001f504 Shutting down Enterprise Retail Recommender System\nINFO     src.api.main_unified_redis:main_unified_redis.py:561 \u2705 StartupManager shutdown completed\nINFO     src.api.factories.service_factory:service_factory.py:801 \U0001f504 ServiceFactory shutdown initiated...\nINFO     src.api.factories.service_factory:service_factory.py:817 \u2705 Redis connections closed\nINFO     src.api.factories.service_factory:service_factory.py:825 \u2705 MCP recommender cleaned up\nINFO     src.api.factories.service_factory:service_factory.py:832 \u2705 Conversation manager cleaned up\nINFO     src.api.factories.service_factory:service_factory.py:863 \u2705 ServiceFactory shutdown completed (ALL CLEAN)\nINFO     src.api.main_unified_redis:main_unified_redis.py:568 \u2705 ServiceFactory shutdown completed\nINFO     src.api.main_unified_redis:main_unified_redis.py:574 \u2705 Enterprise services shutdown completed\n
ERROR: Coverage failure: total of 14 is less than fail-under=40


============================== warnings summary ===============================
tests/integration/test_products_router.py: 40 warnings
  C:\Users\yasma\Desktop\retail-recommender-system\venv\Lib\site-packages\pydantic\fields.py:1026: PydanticDeprecatedSince20: Using extra keyword arguments on `Field` is deprecated and will be removed. Use `json_schema_extra` instead. (Extra keys: 'env'). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.10/migration/
    warn(

tests/integration/test_products_router.py::TestProductDetailEndpoint::test_get_product_not_found
  C:\Users\yasma\Desktop\retail-recommender-system\src\api\routers\products_router.py:627: DeprecationWarning: `example` has been deprecated, please use `examples` instead
    product_id: str = Path(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.11.3-final-0 _______________

Name                                                           Stmts   Miss  Cover   Missing
--------------------------------------------------------------------------------------------
src\__init__.py                                                    0      0   100%
src\api\__init__.py                                                0      0   100%
src\api\claude_integration_quickwin.py                            17     17     0%   1-38
src\api\clients\__init__.py                                        0      0   100%
src\api\clients\grpc_client.py                                   130    130     0%   2-370
src\api\core\__init__.py                                           0      0   100%
src\api\core\ai_factory.py                                       116    116     0%   7-243
src\api\core\async_performance_optimizer.py                      137    137     0%   13-370
src\api\core\background_tasks.py                                  73     73     0%   2-143
src\api\core\cache.py                                            199    164    18%   17-20, 23-71, 87-103, 117-130, 142-150, 159, 172-180, 196-199, 209, 219-221, 226, 230-231, 235, 239-243, 247-251, 255-264, 268-275, 279-286, 290-297, 301-315, 319-332, 336-344, 348-355, 361-362
src\api\core\catalog_manager_fixed.py                             31     31     0%   7-64
src\api\core\claude_config.py                                    191    108    43%   37, 45, 55, 78, 150-172, 179-181, 203-215, 219-234, 239-267, 279-281, 291-293, 308, 313, 318, 323, 334, 339, 344, 348-391, 409-411, 415-416
src\api\core\claude_optimization.py                              101    101     0%   12-343
src\api\core\config.py                                            74     18    76%   17-24, 112-114, 125-140
src\api\core\diversity_aware_cache.py                            240    203    15%   41-43, 46, 82-91, 99-149, 157-166, 173-200, 221-246, 257-268, 282-324, 347-382, 390-399, 403, 407-408, 414-424, 428-440, 444-470, 476-485, 491-500, 526-539
src\api\core\emergency_health_check.py                           123    123     0%   20-382
src\api\core\emergency_shopify_cache.py                          179    179     0%   17-413
src\api\core\enhanced_hybrid_recommender.py                      205    205     0%   9-567
src\api\core\env_validator.py                                    127    127     0%   8-262
src\api\core\event_generator.py                                  221    221     0%   9-463
src\api\core\hybrid_recommender.py                               273    256     6%   38-48, 67-143, 163-193, 210-279, 300-301, 316-368, 391-539, 562-595, 614-667
src\api\core\intelligent_personalization_cache.py                150    150     0%   13-383
src\api\core\mcp_conversation_handler.py                         274    262     4%   65-567, 599, 619-660, 675, 714-732
src\api\core\mcp_router_conservative_enhancement.py              121     87    28%   47-141, 149-171, 190-218, 240-338, 350-362
src\api\core\mcp_router_conservative_enhancement_balanced.py      94     94     0%   14-243
src\api\core\mcp_router_performance_patch.py                      40     40     0%   12-264
src\api\core\metrics.py                                          144    115    20%   54, 74-131, 152-165, 174-191, 210-214, 234-240, 253-290, 303-334, 361-413
src\api\core\observability_manager.py                            225    128    43%   72-102, 106-118, 122-142, 146, 208, 231-241, 245-314, 318-325, 338, 342-356, 360-366, 370, 378, 386, 412-414, 435-437, 465-467, 485-506, 510-524
src\api\core\parallel_processor.py                               138    103    25%   57-90, 99-104, 108-133, 146-173, 177-191, 197-202, 206-213, 223, 248-289, 300-335, 339, 343-361
src\api\core\performance_optimizer.py                            131     84    36%   57-65, 70-102, 106-108, 112-117, 121-126, 130-134, 138, 162-164, 168-187, 191-192, 196-198, 202, 228, 234, 240, 246, 252, 258, 262-264
src\api\core\performance_optimizer_enhanced.py                   195    195     0%   23-572
src\api\core\product_cache.py                                    335    304     9%   49-73, 86-118, 122-123, 132-150, 159-168, 180-282, 294-311, 323-340, 354-366, 376-390, 402-412, 424-433, 442-450, 485-532, 550-601, 613-626, 638-666, 679-713, 719-748
src\api\core\product_data_validator.py                           118    118     0%   7-253
src\api\core\product_gateway.py                                  100    100     0%   3-230
src\api\core\product_validator.py                                131    131     0%   9-316
src\api\core\recommenders.py                                      34     34     0%   8-77
src\api\core\redis_client.py                                     366    366     0%   9-628
src\api\core\redis_client_local_cache.py                          78     78     0%   8-165
src\api\core\redis_config_fix.py                                 583    527    10%   20-31, 45-75, 89-105, 120-184, 193-221, 230-265, 269-278, 282-292, 296-307, 311-322, 327-335, 339-354, 358-377, 381-390, 394-403, 407-413, 419-427, 431-446, 450-469, 473-482, 486-495, 499-505, 510-532, 537-546, 550-559, 563-572, 576-585, 589-598, 613-633, 645-656, 662-671, 677-687, 693-702, 708-717, 723-732, 738-747, 753-762, 768-777, 783-792, 798-807, 818-835, 845-870, 880-896, 908-944
src\api\core\redis_config_optimized.py                            75     45    40%   27-31, 57-98, 106-122, 129, 153, 161-167, 183-207
src\api\core\redis_connection_pool.py                             44     44     0%   6-80
src\api\core\redis_fallback.py                                   140    140     0%   14-239
src\api\core\redis_service.py                                    176    117    34%   83-90, 109-127, 139-163, 177-202, 214-230, 242-250, 264-269, 275-279, 290, 307-331, 350, 362-363, 367-368
src\api\core\sample_data.py                                        1      1     0%   1
src\api\core\store.py                                             19     11    42%   10-20, 26
src\api\dependencies.py                                           99     63    36%   97-99, 235-241, 286-292, 360-374, 431-441, 503-509, 550-556, 593-605, 678-695, 722
src\api\extensions\__init__.py                                     0      0   100%
src\api\extensions\metrics_extension.py                           38     38     0%   8-95
src\api\factories\__init__.py                                     89     59    34%   43-48, 70-86, 96-110, 129-132, 142-145, 155-158, 181-232, 280
src\api\factories\factories.py                                   544    483    11%   38-41, 60-101, 118-177, 191-267, 278-294, 304-322, 346-439, 455-500, 529-596, 615-670, 683-730, 743-744, 754-757, 777-800, 817-818, 828-846, 856-862, 886-916, 926-965, 980-1022, 1035-1091, 1105-1116, 1129-1140, 1150-1173, 1184-1210
src\api\factories\service_factory.py                             442    257    42%   38-39, 115-117, 122-124, 129-131, 136-138, 153-154, 171, 189-190, 195-238, 257-262, 267-273, 291-300, 307-334, 352-356, 382-413, 435-438, 469-497, 518-542, 581-631, 670-757, 764-765, 772-794, 805-810, 816, 818-819, 826-827, 833-834, 838-842, 882-891, 914-916, 925, 929, 933, 937, 941, 945, 949
src\api\health\__init__.py                                         2      2     0%   9-11
src\api\health\claude_health.py                                  214    214     0%   13-525
src\api\integrations\ai\ai_conversation_manager.py               124     83    33%   78-125, 149-185, 192-201, 212-222, 228, 253-266, 272-277, 287-318, 322-325, 336-337, 348-385
src\api\integrations\ai\optimized_conversation_manager.py        220    151    31%   71-86, 90-92, 96-103, 107-112, 116, 186-191, 196, 217-218, 233-234, 246-307, 320, 325-333, 337-344, 348-356, 360-370, 374-384, 395-415, 438-468, 478-497, 501-541, 545-552
src\api\integrations\shopify_client.py                           142    129     9%   9-19, 32-105, 118-128, 142-173, 186-221, 233-268, 277-288
src\api\inventory\__init__.py                                      4      0   100%
src\api\inventory\availability_checker.py                         98     82    16%   29-33, 51-81, 98-124, 143-171, 188-236, 247-262, 266-267, 272
src\api\inventory\inventory_service copy 2.py                    196    196     0%   13-497
src\api\inventory\inventory_service copy.py                      197    197     0%   13-500
src\api\inventory\inventory_service.py                           208    149    28%   52-68, 129-130, 136-146, 163-187, 204-230, 250-310, 314-338, 342-363, 367-393, 397-419, 430-454, 459-489, 494-525, 534
src\api\inventory\market_inventory.py                            183    120    34%   57-58, 82-92, 97-187, 206-226, 245-270, 292-334, 338, 342, 346-354, 367-410, 427-444, 454-468, 477-500, 509-511, 530-562, 567
src\api\main.py                                                   69     69     0%   1-117
src\api\main_cached.py                                            97     97     0%   2-252
src\api\main_distributed.py                                      158    158     0%   2-458
src\api\main_precomputed.py                                       81     81     0%   9-192
src\api\main_tfidf.py                                            103    103     0%   9-265
src\api\main_unified_redis.py                                    607    397    35%   67-70, 76-77, 116-118, 196-209, 214-215, 219-220, 225-234, 254-256, 270-279, 312-317, 330-366, 371-373, 390, 394-400, 413-414, 426-428, 436-441, 444-445, 462-464, 468-477, 498-499, 505-528, 546-552, 559-560, 562-563, 569-570, 576-577, 606-610, 619-633, 644-656, 670, 693-722, 738-741, 765-875, 887-964, 996-1041, 1054-1074, 1086-1123, 1144-1155, 1159-1183, 1189-1227, 1240, 1267-1347, 1352, 1378-1417, 1424-1432
src\api\mcp\adapters\market_manager.py                           140    118    16%   12-16, 24-35, 39-40, 44-54, 58-73, 77-103, 107-220, 225-264, 269-278, 284, 289-361, 367-377, 383-391
src\api\mcp\client\__init__.py                                     0      0   100%
src\api\mcp\client\mcp_client.py                                 189    152    20%   36-39, 42, 45, 49, 53-59, 63-69, 88-123, 127-140, 157-175, 192-208, 214-217, 221-249, 253-284, 288-299, 329-330, 351-405, 417-441, 455-473, 483-491
src\api\mcp\conversation_state_manager.py                        546    429    21%   115, 122, 131-146, 155-173, 180, 187, 199, 225-256, 316-341, 348-354, 359, 363-367, 382-425, 447-489, 506-558, 565-615, 632-670, 696-738, 755-834, 848, 862, 873-952, 958-981, 993-1008, 1022-1077, 1081, 1095, 1120-1126, 1149-1157, 1161-1181, 1185-1196, 1200-1217, 1226-1270, 1283-1299, 1303-1329, 1334, 1346-1353, 1357-1363, 1370-1376, 1399-1424, 1429, 1434
src\api\mcp\engines\__init__.py                                    0      0   100%
src\api\mcp\engines\mcp_personalization_engine.py               1422   1272    11%   125-128, 182-289, 309-463, 469-511, 523-544, 576-623, 637-683, 693-739, 751-789, 799-833, 852-910, 929-962, 966, 981-999, 1014-1026, 1042-1060, 1076-1096, 1113-1177, 1195-1266, 1319-1374, 1393-1421, 1432-1476, 1485-1508, 1516-1567, 1571-1574, 1607-1628, 1632-1655, 1664-1689, 1693-1731, 1739-1766, 1770-1804, 1808-1840, 1844-1874, 1880-1904, 1908-1922, 1926-1941, 1945-1970, 1974-1993, 2003, 2030-2046, 2050-2063, 2072-2094, 2105-2136, 2144-2168, 2176-2198, 2202-2221, 2230-2262, 2271-2301, 2312-2333, 2337-2383, 2387-2443, 2447-2497, 2505-2557, 2566-2599, 2608-2664, 2670-2684, 2688-2715, 2719-2749, 2753-2794, 2798-2819, 2823-2854, 2863-2885, 2894-2915, 2928, 2947-2982, 2986-3012, 3016-3059, 3063-3146, 3150-3176, 3180-3248, 3254-3271, 3275-3285, 3289-3304, 3308-3322, 3326-3347, 3351-3362, 3366-3391, 3395-3427, 3447-3493, 3505-3510, 3514-3517, 3536-3548, 3552-3558, 3563-3572, 3576-3584, 3615-3645
src\api\mcp\models\__init__.py                                     0      0   100%
src\api\mcp\models\mcp_models.py                                 113      0   100%
src\api\mcp_services\currency\service.py                          16     11    31%   15, 28-49, 58-62
src\api\mcp_services\market_config\service.py                     21     11    48%   16, 73, 77-78, 84-85, 89-90, 94-95, 99
src\api\mcp_services\models.py                                    34      0   100%
src\api\mcp_services\orchestration\mcp_adapter.py                 46     35    24%   27-30, 41-112, 131-142
src\api\metrics_router.py                                         26     26     0%   6-60
src\api\monitoring\__init__.py                                     2      2     0%   9-17
src\api\monitoring\claude_monitoring.py                          272    272     0%   13-614
src\api\routers\mcp_router.py                                    629    556    12%   89-132, 181-190, 195-204, 209-218, 223-242, 264-275, 290-1330, 1339-1370, 1386-1534, 1546-1571, 1584-1599, 1612-1648, 1662-1679, 1691-1703, 1721-1773, 1795-1823, 1836-1865
src\api\routers\products_router.py                               770    572    26%   189-208, 224-260, 265-266, 379-430, 486-615, 691-703, 712-720, 735-739, 741, 756-798, 804-807, 828-973, 982-1067, 1076-1108, 1117-1160, 1182-1186, 1194-1198, 1214-1226, 1252-1256, 1262-1274, 1280-1305, 1325-1331, 1353-1356, 1358-1360, 1376-1377, 1382-1387, 1393-1395, 1408-1438, 1445-1449, 1458-1461, 1466-1494, 1510-1529, 1543-1563, 1573-1609, 1623-1646, 1660-1681, 1694-1695, 1710-1712, 1754-1756, 1783-1785, 1803-1855, 1869-1947, 1965-1968, 1997-2160
src\api\routers\recommendations.py                               191    155    19%   77, 140-160, 177-204, 221-245, 258-280, 325-420, 457-542, 587-657
src\api\run.py                                                     7      7     0%   1-14
src\api\security\__init__.py                                       2      2     0%   9-11
src\api\security\claude_security_audit.py                        202    202     0%   13-549
src\api\security_auth.py                                          45     29    36%   39-55, 70-83, 98-100, 110, 123-131, 144-153
src\api\startup_helper.py                                        111     97    13%   32-36, 52-59, 79-143, 147-149, 153-162, 172-200, 209-228, 255-272
src\api\utils\__init__.py                                          3      0   100%
src\api\utils\direct_corrections.py                              100     92     8%   37-135, 148-168, 181-213, 227-234
src\api\utils\market_adaptations_patch.py                        144    132     8%   57-109, 127-210, 222-238, 256-289, 299-330, 342-368
src\api\utils\market_integration.py                              127    116     9%   48-97, 115-134, 148-184, 197-220, 236-292, 304-332, 344
src\api\utils\market_processor.py                                 77     59    23%   49-75, 94-139, 148-165, 175-192, 201, 205, 231, 240
src\api\utils\market_utils.py                                    168    138    18%   23-26, 36-40, 46-67, 81-115, 124-148, 156-181, 192-213, 227-233, 245-256, 264-281, 291-294, 306-322, 326-331, 335-336, 340-341, 345-346, 354-373, 376-378
src\api\utils\market_utils_backup_20250724_012428.py             130    130     0%   9-340
src\api\utils\market_utils_mcp_first.py                           73     73     0%   15-180
src\cache\__init__.py                                              2      0   100%
src\cache\market_aware\__init__.py                                 2      0   100%
src\cache\market_aware\market_cache.py                           115     98    15%   16-20, 37-67, 80-99, 114-137, 150-168, 181-200, 212-226, 239-259, 268-288
src\core\__init__.py                                               0      0   100%
src\core\market\__init__.py                                        0      0   100%
src\core\market\adapter.py                                       158    120    24%   36-37, 158-159, 178-231, 235-278, 282-297, 302-326, 331-342, 347-355, 359-360, 364, 379-400, 410-412, 422-423, 429-458, 463-464
src\grpc_server\__init__.py                                        0      0   100%
src\grpc_server\server.py                                        162    162     0%   2-471
src\recommenders\__init__.py                                      22      5    77%   15, 23-24, 29, 35
src\recommenders\collaborative.py                                 28     27     4%   2-107
src\recommenders\content_based.py                                 22     21     5%   2-50
src\recommenders\hybrid.py                                       156    153     2%   4-406
src\recommenders\improved_fallback.py                            164    164     0%   9-361
src\recommenders\improved_fallback_exclude_seen.py               229    211     8%   26-49, 61-79, 98-113, 133-225, 245-365, 388-502, 527-554
src\recommenders\mcp_aware_hybrid.py                             147    147     0%   7-456
src\recommenders\mcp_aware_hybrid_fixed.py                       203    203     0%   9-648
src\recommenders\mcp_aware_recommender.py                        288    288     0%   12-687
src\recommenders\precomputed_embedding_recommender.py             84     84     0%   9-206
src\recommenders\precomputed_recommender.py                       62     62     0%   2-137
src\recommenders\retail_api.py                                   617    586     5%   20, 33-51, 73-237, 250-307, 313-363, 375-501, 514-719, 735-827, 836-847, 859-990, 1012-1117, 1128-1270
src\recommenders\simple_tfidf_recommender.py                      73     73     0%   2-169
src\recommenders\tfidf_recommender.py                            134    117    13%   33-41, 53-115, 127-159, 173-209, 223-256, 268-282, 292-315
src\recommenders\tfidf_recommender_fixed.py                      247    247     0%   13-542
--------------------------------------------------------------------------------------------
TOTAL                                                          18585  16067    14%
Coverage HTML written to dir htmlcov
FAIL Required test coverage of 40% not reached. Total coverage: 13.55%
======================= 1 passed, 41 warnings in 4.73s ========================
